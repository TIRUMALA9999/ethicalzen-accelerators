# ACVPS Gateway Configuration Example

gateway:
  name: "acvps-gateway-1"
  port: 443
  metrics_port: 9090
  
  tls:
    enabled: true
    cert: "/etc/acvps/certs/cert.pem"
    key: "/etc/acvps/certs/key.pem"
    # For self-signed certs in development
    insecure_skip_verify: false

blockchain:
  # WebSocket or HTTP RPC URL
  rpc_url: "ws://localhost:8546"
  
  # DCRegistry contract address
  contract_address: "0x5FbDB2315678afecb367f032d93F642f64180aa3"
  
  # Cache TTL for contracts (seconds)
  cache_ttl: 300  # 5 minutes
  
  # Timeout for blockchain queries (seconds)
  timeout: 10
  
  # Retry configuration
  max_retries: 3
  retry_delay: 1  # seconds

backend:
  # Backend service URL
  url: "http://backend-service:8080"
  
  # Timeout for backend requests (seconds)
  timeout: 30
  
  # Connection pool settings
  max_idle_conns: 100
  max_conns_per_host: 10
  idle_conn_timeout: 90  # seconds

validation:
  # Validation mode: strict | balanced | observe
  # - strict: Block all invalid requests
  # - balanced: Allow with warnings
  # - observe: Log only, don't block
  mode: "strict"
  
  # Require DC headers
  require_dc_headers: true
  
  # Enforce failure modes
  enforce_failure_modes: true
  
  # Allowed suites (empty = all)
  allowed_suites: ["S0", "S1", "S2"]

mitigation:
  # PII redaction
  pii_redaction:
    enabled: true
    # Fields to always redact
    always_redact: ["ssn", "credit_card", "password"]
  
  # Grounding checks
  grounding:
    enabled: true
    # Minimum confidence threshold
    min_confidence: 0.72
    # Action: block | warn | inject_notice
    action: "block"
  
  # Hallucination detection
  hallucination:
    enabled: true
    # Maximum risk score
    max_risk: 0.3
    action: "warn"

cache:
  # Redis URL
  redis_url: "redis://localhost:6379"
  
  # Redis password (optional)
  redis_password: ""
  
  # Redis DB number
  redis_db: 0
  
  # Connection pool size
  pool_size: 100
  
  # Max retries
  max_retries: 3

evidence:
  # EthicalZen Control Plane URL
  control_plane_url: "https://dc-control-plane.ethicalzen.ai"
  
  # API key for evidence submission
  api_key: "${ETHICALZEN_API_KEY}"
  
  # Buffer size (number of evidence records before flush)
  buffer_size: 1000
  
  # Flush interval (seconds)
  flush_interval: 5
  
  # Async submission (non-blocking)
  async: true

logging:
  # Log level: debug | info | warn | error
  level: "info"
  
  # Log format: json | text
  format: "json"
  
  # Log output: stdout | file
  output: "stdout"
  
  # Log file path (if output=file)
  file: "/var/log/acvps/gateway.log"
  
  # Log rotation
  max_size: 100  # MB
  max_backups: 10
  max_age: 30  # days

metrics:
  # Enable Prometheus metrics
  enabled: true
  
  # Metrics endpoint
  path: "/metrics"
  
  # Namespace for metrics
  namespace: "acvps"

# Rate limiting (optional)
rate_limit:
  enabled: false
  # Requests per second per IP
  rps: 100
  # Burst size
  burst: 200

# CORS (optional)
cors:
  enabled: true
  allowed_origins: ["*"]
  allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowed_headers: ["*"]
  max_age: 3600

# Development mode
dev_mode: false

